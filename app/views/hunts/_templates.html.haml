%script{ :type => "text/ng-template", :id => "round_grouped" }
  .round{ :id => "{{ round.id }}" }
    .rounded_title
      .title_left{ :"ng-include" => "'edit_controls'" }
    %h2
      %a{ :href => "{{ round_path( round ) }}", :target => "_blank" } {{ round.name }}
      (
      %a{ :href => "{{ round.url }}", :target => "_blank" } url &#10138;
      )
    %b Priority: {{ round.priority }}
    %br
    %b Hint: {{ round.hint }}
    %br
    %b Captain: {{ round.captain }}
    %br
    %b Answer: {{ round.answer }}
    %br

    // TODO: put back team captain limits
    %a{ :"ng-click" => "create_puzzle(round)" } Add puzzle
    %a{ :"ng-click" => "refresh_activities(round)" } Refresh activity
    %table.puzzletable
      %thead{ :"ng-include" => "'puzzle_header'" }
      %tbody
        %tr{ "ng-repeat" => "puzzle in round.puzzles", :"ng-include" => "puzzle_row(puzzle)" }

%script{ :type => "text/ng-template", :id => "edit_controls" }
  %b Edit
  %b | &#x21BA;
  %b | &#x2612;
  %b{ :"ng-show" => "title" } | {{ title }}

%script{ :type => "text/ng-template", :id => "round_ungrouped" }
  %table.puzzletable{ style: "border:1px solid #354;" }
    %thead{ :"ng-include" => "'puzzle_header'" }
    %tbody
      %tr{ :"ng-repeat" => "puzzle in hunt.puzzles", :"ng-include" => "'puzzle_row'" }

%script{ :type => "text/ng-template", :id => "puzzle_header" }
  %tr
    %th Priority
    %th Status
    %th{ :"ng-hide" => "grouped" } Round
    %th Activity
    %th Name
    %th Blurb
    %th Captain
    %th Answer

%script{ :type => "text/ng-template", :id => "puzzle_activity" }
  %canvas{ :"id" => "{{ canvas(puzzle) }}", :width => 150, :height => 30 }

%script{ :type => "text/ng-template", :id => "puzzle_row" }
  %td {{ puzzle.priority }}
  %td {{ puzzle.status }}
  %td{ :"ng-hide" => "grouped" } {{ puzzle.round }}
  %td{ :"ng-include" => "'puzzle_activity'" }
  %td
    %a{ :href => "puzzle_path(puzzle)", :target => "_blank" } {{ puzzle.name }}
    (
    %a{ :href => "puzzle.url", :target => "_blank" } url &#10138;
    )
  %td {{ puzzle.hint }}
  %td {{ puzzle.captain }}
  %td {{ puzzle.answer }}
  %td
    %a{ "ng-click" => "edit_puzzle(puzzle)" } Edit
    %a{ "ng-click" => "delete_puzzle(puzzle)" } &#9746;

%script{ :type => "text/ng-template", :id => "puzzle_row_edit" }
  %td
    %input{ :type => :text, :"ng-model" => "puzzle.priority" }
  %td
    %input{ :type => :text, :"ng-model" => "puzzle.status" }
  %td
    %input{ :type => :text, :"ng-model" => "puzzle.round" }
  %td
    %input{ :type => :text, :"ng-model" => "puzzle.name" }
    %input{ :type => :text, :"ng-model" => "puzzle.url" }
  %td
    %input{ :type => :text, :"ng-model" => "puzzle.hint" }
  %td
    %input{ :type => :text, :"ng-model" => "puzzle.captain" }
  %td
    %input{ :type => :text, :"ng-model" => "puzzle.answer" }
  %td
    %a{ "ng-click" => "update_puzzle(puzzle)" } Update
    %a{ "ng-click" => "cancel_edit(puzzle)" } Cancel

%script{ :type => "text/ng-template", :id => "round_create" }
  %p
    %input{ :type => :text, :"ng-model" => "new_round.name" }
    %input{ :type => :text, :"ng-model" => "new_round.url" }
    %a{ :"ng-click" => "post_new_round()" } Create
    %a{ :"ng-click" => "cancel_new_round()" } Cancel
  %p 
